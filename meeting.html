<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<title>Meeting MAP</title>

<style>
body{
  margin:0;
  padding:20px;
  font-family:Segoe UI;
  background:
    linear-gradient(0deg,rgba(0,0,0,.6),rgba(0,0,0,.6)),
    url('citylight.png') no-repeat center/cover;
  color:#fff;
}
.container{display:flex;gap:20px}
.column{
  flex:1;
  background:rgba(255,255,255,.15);
  padding:16px;border-radius:14px
}
.booking{
  background:rgba(255,255,255,.15);
  padding:12px;border-radius:10px;margin-bottom:10px
}
.btn{border:none;padding:6px;border-radius:6px;color:#fff}
.edit{background:#00b4ff}
.delete{background:#ff3b3b}
.fab{
  position:fixed;right:20px;bottom:20px;
  width:60px;height:60px;border-radius:50%;
  background:#00c8ff;color:#fff;
  display:flex;align-items:center;justify-content:center;
  font-size:34px;text-decoration:none
}
</style>
</head>

<body>

<h1>Jadwal Peminjaman Ruang Meeting PT Mitra Asa Pratama</h1>

<div class="container">
  <div class="column"><h3>Arjuna</h3><div id="arjuna"></div></div>
  <div class="column"><h3>Srikandi</h3><div id="srikandi"></div></div>
  <div class="column"><h3>Gatot Kaca</h3><div id="gatot"></div></div>
</div>

<a href="daftar.html" class="fab">+</a>

<script>
const API_URL = "https://script.google.com/macros/s/AKfycbzm9o4CWCAfECu3oNefcbYmF7N_MbmaLITEp0ERw7KsLCc33DMNYrBfa78OszgodbIi/exec";

async function loadData(){
  const res = await fetch(API_URL);
  const data = await res.json();

  arjuna.innerHTML="";
  srikandi.innerHTML="";
  gatot.innerHTML="";

  data.forEach(d=>{
    const el=document.createElement("div");
    el.className="booking";
    el.innerHTML=`
      <b>${d.agenda}</b><br>
      üìÖ ${d.tanggal}<br>
      ‚è∞ ${d.mulai} - ${d.selesai}<br>
      üë§ ${d.nama}<br><br>
      <button class="btn edit" onclick="editData('${d.id}')"></button>
      <button class="btn delete" onclick="hapusData('${d.id}')"></button>
    `;
    if(d.ruangan==="Arjuna") arjuna.appendChild(el);
    if(d.ruangan==="Srikandi") srikandi.appendChild(el);
    if(d.ruangan==="Gatot Kaca") gatot.appendChild(el);
  });
}

async function editData(id){
  const agenda  = prompt("Agenda baru:");
  const tanggal = prompt("Tanggal (YYYY-MM-DD):");
  const mulai   = prompt("Jam mulai:");
  const selesai = prompt("Jam selesai:");
  const nama    = prompt("Nama PIC:");

  if(!agenda || !tanggal) return;

  await fetch(API_URL,{
    method:"POST",
    headers:{ "Content-Type":"application/x-www-form-urlencoded" },
    body:
      "action=update&id="+id+
      "&agenda="+agenda+
      "&tanggal="+tanggal+
      "&mulai="+mulai+
      "&selesai="+selesai+
      "&nama="+nama
  });

  alert("‚úÖ Data diupdate");
  loadData();
}

async function hapusData(id){
  if(!confirm("Hapus jadwal ini?")) return;
  await fetch(API_URL,{
    method:"POST",
    headers:{ "Content-Type":"application/x-www-form-urlencoded" },
    body:"action=delete&id="+id
  });
  loadData();
}

loadData();
</script>

</body>
</html>
