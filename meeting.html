<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Dashboard Ruang Meeting</title>

<style>
body{
    margin:0;
    padding:20px;
    font-family:'Segoe UI',sans-serif;
    background:
        linear-gradient(0deg,rgba(0,0,0,.5),rgba(0,0,0,.5)),
        url('citylight.png') no-repeat center/cover;
    color:#fff;
    min-height:100vh;
}

.logo{
    display:block;
    width:130px;
    margin:0 auto 10px;
}

h1{
    text-align:center;
    margin-bottom:25px;
}

.container{
    display:flex;
    gap:20px;
}
.column{
    flex:1;
    background:rgba(255,255,255,.12);
    border-radius:16px;
    padding:16px;
}
.column h2{
    text-align:center;
    color:#bfefff;
}

.booking{
    background:rgba(255,255,255,.1);
    padding:12px;
    border-radius:12px;
    margin-bottom:10px;
    border-left:4px solid #00c8ff;
}
.booking .agenda{font-weight:600}
.booking .actions{
    margin-top:8px;
    display:flex;
    gap:6px;
}
.btn{
    flex:1;
    border:none;
    border-radius:8px;
    padding:6px;
    font-size:13px;
    cursor:pointer;
    color:#fff;
}
.edit{background:#00b4ff}
.delete{background:#ff3b3b}

/* FAB */
.fab{
    position:fixed;
    right:28px;
    bottom:28px;
    width:64px;
    height:64px;
    border-radius:50%;
    background:linear-gradient(135deg,#00d4ff,#0090ff);
    display:flex;
    align-items:center;
    justify-content:center;
    font-size:38px;
    font-weight:bold;
    color:#fff;
    text-decoration:none;
    box-shadow:0 10px 25px rgba(0,0,0,.45);
    z-index:9999;
}

@media(max-width:800px){
    .container{flex-direction:column}
}
</style>
</head>

<body>

<img src="map-log.png" class="logo">
<h1>Jadwal Peminjaman Ruang Meeting MAP</h1>

<div class="container">
    <div class="column"><h2>Arjuna</h2><div id="arjuna"></div></div>
    <div class="column"><h2>Srikandi</h2><div id="srikandi"></div></div>
    <div class="column"><h2>Gatot Kaca</h2><div id="gatot"></div></div>
</div>

<a href="daftar.html" class="fab">+</a>

<script>
const API_URL = "https://script.google.com/macros/s/AKfycbztad3MUDmIvrw2HF0Qz5MmWugiXlyaNibfIulhjYEMR4eeeseQcq2E8RWTaV9TrbrV/exec";

function formatTanggal(t){
    const b=["","Jan","Feb","Mar","Apr","Mei","Jun","Jul","Agu","Sep","Okt","Nov","Des"];
    const [y,m,d]=t.split("-");
    return d+" "+b[Number(m)]+" "+y;
}

async function loadData(){
    const res = await fetch(API_URL);
    const data = await res.json();

    arjuna.innerHTML="";
    srikandi.innerHTML="";
    gatot.innerHTML="";

    data.forEach(d=>{
        const el=document.createElement("div");
        el.className="booking";
        el.innerHTML=`
            <div class="agenda">${d.agenda}</div>
            <div>üìÖ ${formatTanggal(d.tanggal)}</div>
            <div>‚è∞ ${d.mulai} - ${d.selesai}</div>
            <div>üë§ ${d.nama}</div>
            <div class="actions">
                <button class="btn edit" onclick="editData('${d.id}')">Edit</button>
                <button class="btn delete" onclick="hapusData('${d.id}')">Hapus</button>
            </div>
        `;
        if(d.ruangan==="Arjuna") arjuna.appendChild(el);
        if(d.ruangan==="Srikandi") srikandi.appendChild(el);
        if(d.ruangan==="Gatot Kaca") gatot.appendChild(el);
    });
}

function editData(id){
    location.href="daftar.html?id="+id;
}

async function hapusData(id){
    if(!confirm("Hapus jadwal ini?")) return;
    await fetch(API_URL,{
        method:"POST",
        headers:{ "Content-Type":"application/x-www-form-urlencoded" },
        body:"action=delete&id="+id
    });
    loadData();
}

loadData();
</script>

</body>
</html>
