<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="icon" type="image/jpg" href="logo.jpg">
  <title>Peminjaman Ruang Meeting – MAP</title>

  <!-- Tailwind -->
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet" />

  <!-- Swiper CSS -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@9/swiper-bundle.min.css" />

  <!-- Feather & Chart.js -->
  <script src="https://unpkg.com/feather-icons"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
  
  <!-- Ikon & Library -->
  <script src="https://unpkg.com/feather-icons"></script>
  <script src="https://cdn.jsdelivr.net/npm/tabletop@1.5.1/tabletop.min.js"></script>


  <!-- Custom Style -->
  <style>
    .sidebar { transition: transform 0.3s ease; }
    .no-scrollbar::-webkit-scrollbar { display: none; }
    .no-scrollbar { scrollbar-width: none; }
  </style>
</head>
  <script>
  document.addEventListener('DOMContentLoaded', function () {
    Tabletop.init({
      key: '1aRLwWmM0UR8RM2xhsFFafBSHIoBWddyvNtdoMnuQijA',
      simpleSheet: true,
      callback: function (data) {
        const card = document.getElementById('meetingCard');
        card.innerHTML = ''; // Kosongkan dulu

        const today = new Date();

        // Filter data yang tanggalnya hari ini atau ke depan
        const upcoming = data
          .filter(item => {
            const tanggal = new Date(item['Tanggal']);
            return tanggal >= today;
          })
          .sort((a, b) => new Date(a['Tanggal']) - new Date(b['Tanggal'])); // Urutkan

        if (upcoming.length > 0) {
          const next = upcoming[0];
          card.innerHTML = `
            <h3 class="font-semibold text-gray-900">${next['Judul Meeting'] || 'Meeting Tanpa Judul'}</h3>
            <p>📅 <span class="font-medium">${next['Tanggal']}</span></p>
            <p>⏰ ${next['Waktu Mulai']} – ${next['Waktu Selesai']}</p>
            <p>🏢 Ruang: ${next['Nama Ruangan']}</p>
            <p>🙋‍♂️ PIC: ${next['Nama Pemesan'] || '-'}</p>
          `;
        } else {
          card.innerHTML = `<p class="text-sm text-gray-500">Belum ada jadwal meeting berikutnya.</p>`;
        }
      }
    });
  });
</script>

<body class="bg-gray-100 min-h-screen flex flex-col">

  <!-- ===== BURGER (mobile) ===== -->
  <button id="btn-open"
          class="lg:hidden fixed top-4 left-4 z-50 p-3 bg-gray-800 text-white
                 rounded-full hover:bg-gray-700 active:scale-95 transition">
    <i data-feather="menu" aria-hidden="true"></i>
    <span class="sr-only">Buka menu</span>
  </button>

  <!-- ===== OVERLAY ===== -->
  <div id="overlay" class="fixed inset-0 bg-black/40 hidden z-40 lg:hidden"></div>

 <!-- ===== SIDEBAR ===== -->
<aside id="sidebar"
       class="sidebar fixed inset-y-0 left-0 w-64 bg-gray-900 text-white shadow-lg
              -translate-x-full lg:translate-x-0 z-50">

  <!-- HEADER SIDEBAR -->
  <div class="flex items-center justify-between p-4 border-b border-gray-700">
    <!-- Logo & Judul -->
    <div class="flex items-center gap-2">
      <img src="map-log.png" alt="Logo MAP" class="h-10 w-auto rounded shadow" />
      <span class="font-semibold text-lg">MAP</span>
    </div>

    <!-- Tombol X (Tutup Menu) -->
    <button id="btn-close" class="z-50 lg:hidden p-2 rounded hover:bg-gray-800 focus:outline-none">
      <i data-feather="x" aria-hidden="true"></i>
      <span class="sr-only">Tutup menu</span>
    </button>
  </div>

  <!-- MENU NAV -->
  <nav class="mt-4 space-y-1">
    <a href="kalender.html" class="block py-2 px-4 hover:bg-indigo-600">Kalendar</a>
    <a href="list_booking.html" class="block py-2 px-4 hover:bg-indigo-600">List Booking</a>
  </nav>

</aside>


      </button>
    </div>
    <nav class="mt-4 space-y-1">
      
      <a href="kalender.html" class="block py-2 px-4 hover:bg-indigo-600">Kalendar</a>
      <a href="list_booking.html" class="block py-2 px-4 hover:bg-indigo-600">List Booking</a>
    </nav>
  </aside>

  <!-- ===== WRAPPER KONTEN ===== -->
  <div class="flex-1 flex flex-col lg:ml-64">

    <!-- HEADER -->
    <header class="bg-gradient-to-r from-indigo-700 via-indigo-600 to-indigo-700
                   text-white shadow-lg sticky top-0 z-40">
      <div class="max-w-7xl mx-auto flex items-center justify-between px-4 py-3">
        <div class="flex items-center gap-2">
          <img src="logo.jpg" alt="Logo MAP" class="h-9 w-auto rounded shadow" />
        </div>
        <h1 class="text-base sm:text-xl md:text-2xl font-extrabold flex-1 text-center drop-shadow">
          Peminjaman Ruang Meeting
        </h1>
        <div class="w-12 sm:w-20"></div>
      </div>
    </header>

    <!-- ============ MAIN ============ -->
    <main class="flex-1 overflow-y-auto p-4 space-y-10">

        <div id="cards" class="contents"></div>
<!-- Tampilan 1 Baris Meeting Terdekat -->
<section id="meetingTerdekat" class="bg-white p-5 rounded-xl shadow-md max-w-xl mx-auto">
  <h2 class="text-lg font-bold text-indigo-600 mb-2">📍 Jadwal Meeting Terdekat</h2>
  <div id="meetingCard" class="space-y-1 text-gray-700">
    <p>Loading...</p>
  </div>
</section>

      <!-- SLIDE PEMAKAIAN RUANG MEETING -->
<section class="space-y-4">
  <h2 class="text-xl font-bold text-indigo-700">Jadwal Pemakaian Ruangan</h2>
  
<!-- Embed Google Sheets Responsif -->
<div class="w-full h-[75vh] md:h-[85vh] overflow-hidden rounded-xl shadow-md">
  <iframe
    class="w-full h-full border-0"
    src="https://docs.google.com/spreadsheets/d/1aRLwWmM0UR8RM2xhsFFafBSHIoBWddyvNtdoMnuQijA/preview"
    allowfullscreen
    loading="lazy"
  ></iframe>
</div>

  <!-- Swiper Container -->
  <div class="swiper mySwiper">
    <div class="swiper-wrapper" id="calendarEvents">
      <!-- Slide dari Google Sheets akan muncul di sini -->
    </div>
    <!-- Tombol navigasi -->
    <div class="swiper-button-next"></div>
    <div class="swiper-button-prev"></div>
    <!-- Pagination -->
    <div class="swiper-pagination"></div>
  </div>
</section>

      </section>
<script>
document.addEventListener('DOMContentLoaded', function () {
  Tabletop.init({
    key: '1aRLwWmM0UR8RM2xhsFFafBSHIoBWddyvNtdoMnuQijA',
    simpleSheet: true,
    callback: function (data) {
      const container = document.getElementById('calendarEvents');
      container.innerHTML = '';

      data.forEach(item => {
        const slide = document.createElement('div');
        slide.className = 'swiper-slide bg-white rounded-xl shadow p-5';
        slide.innerHTML = `
          <h4 class="text-lg font-bold text-indigo-600 mb-1">${item['Nama Ruangan'] || 'Ruang'}</h4>
          <p class="text-gray-700 text-sm mb-1">📅 ${item['Tanggal']}</p>
          <p class="text-gray-700 text-sm">⏰ ${item['Waktu Mulai']} - ${item['Waktu Selesai']}</p>
          <p class="mt-2 text-gray-900 font-semibold">${item['Judul Meeting'] || ''}</p>
          <p class="text-sm text-gray-500">PIC: ${item['Nama Pemesan'] || '-'}</p>
        `;
        container.appendChild(slide);
      });

      // Inisialisasi Swiper setelah isi data
      new Swiper('.mySwiper', {
        slidesPerView: 1,
        spaceBetween: 20,
        navigation: {
          nextEl: '.swiper-button-next',
          prevEl: '.swiper-button-prev',
        },
        pagination: {
          el: '.swiper-pagination',
          clickable: true,
        },
      });
    }
  });
});
</script>

  <!-- FOOTER -->
  <footer class="w-full mt-auto">
    <div class="bg-gradient-to-r from-indigo-600 via-indigo-500 to-indigo-700 py-5">
      <div class="flex items-center justify-center text-white gap-2">
        <i data-feather="shield" class="w-5 h-5"></i>
        <span class="text-sm sm:text-base">© 2025 Mitra Asa Pratama</span>
      </div>
    </div>
  </footer>

  <!-- SCRIPT -->
  <script src="sidebar.js"></script>
  <script src="app.js"></script> <!-- Swiper JS -->
<script src="https://cdn.jsdelivr.net/npm/swiper@9/swiper-bundle.min.js"></script>

<!-- Feather Icons -->
<script>feather.replace()</script>

<!-- Inisialisasi Swiper + Ambil data dari Google Sheets -->
<script>
  document.addEventListener('DOMContentLoaded', function () {
    Tabletop.init({
      key: '1aRLwWmM0UR8RM2xhsFFafBSHIoBWddyvNtdoMnuQijA',
      simpleSheet: true,
      callback: function (data) {
        const container = document.getElementById('calendarEvents');
        container.innerHTML = '';

        data.forEach(item => {
          const slide = document.createElement('div');
          slide.className = 'swiper-slide bg-white rounded-xl shadow p-4';
          slide.innerHTML = `
            <div class="space-y-2">
              <h3 class="text-indigo-700 font-bold text-lg">${item['Nama Ruangan'] || 'Ruang Meeting'}</h3>
              <p class="text-sm text-gray-600">📅 ${item['Tanggal']} – ⏰ ${item['Waktu Mulai']} s/d ${item['Waktu Selesai']}</p>
              <p class="text-base font-semibold text-gray-800">${item['Judul Meeting'] || '-'}</p>
              <p class="text-sm text-gray-500">PIC: ${item['Nama Pemesan'] || '-'}</p>
            </div>
          `;
          container.appendChild(slide);
        });

        new Swiper('.mySwiper', {
          slidesPerView: 1,
          spaceBetween: 15,
          pagination: { el: '.swiper-pagination', clickable: true },
          navigation: {
            nextEl: '.swiper-button-next',
            prevEl: '.swiper-button-prev',
          },
          breakpoints: {
            640: { slidesPerView: 1 },
            768: { slidesPerView: 2 },
            1024: { slidesPerView: 3 },
          },
        });
      }
    });
  });
</script>

      <script>
  document.getElementById("btn-open").addEventListener("click", () => {
    document.getElementById("sidebar").classList.remove("-translate-x-full");
    document.getElementById("overlay").classList.remove("hidden");
  });

  document.getElementById("btn-close").addEventListener("click", () => {
    document.getElementById("sidebar").classList.add("-translate-x-full");
    document.getElementById("overlay").classList.add("hidden");
  });
</script>


</body>
</html>
